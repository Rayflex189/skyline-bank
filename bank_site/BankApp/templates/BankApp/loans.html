  {% load humanize %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loan Application - Skyline Bank</title>
  <meta name="description" content="Apply for a loan with Axis Capital Trust">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<!-- Smartsupp Live Chat script -->
<script type="text/javascript">
var _smartsupp = _smartsupp || {};
_smartsupp.key = '899676932fa37897c72547bb5f98cdccfbedf278';
window.smartsupp||(function(d) {
  var s,c,o=smartsupp=function(){ o._.push(arguments)};o._=[];
  s=d.getElementsByTagName('script')[0];c=d.createElement('script');
  c.type='text/javascript';c.charset='utf-8';c.async=true;
  c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);
})(document);
</script>
<noscript> Powered by <a href=“https://www.smartsupp.com” target=“_blank”>Smartsupp</a></noscript>
 <link rel="manifest" href="{% static 'manifest.json' %}">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Source+Sans+Pro:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
        --light-blue: #E8F4F8;
        --primary-blue: #2A6EBB;
        --dark-blue: #1A4A7A;
        --accent-blue: #4A90E2;
        --soft-gray: #F5F7FA;
        --medium-gray: #E1E8ED;
        --text-dark: #2C3E50;
        --text-light: #7F8C8D;
        --success: #27AE60;
        --warning: #E67E22;
        --error: #E74C3C;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Source Sans Pro', sans-serif;
        background: linear-gradient(135deg, var(--light-blue) 0%, var(--soft-gray) 100%);
        color: var(--text-dark);
        min-height: 100vh;
        line-height: 1.6;
        padding-bottom: 80px;
    }

    /* Header Styling */
    .bank-header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid var(--medium-gray);
        box-shadow: 0 2px 15px rgba(42, 110, 187, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .bank-header h1 {
        font-family: 'Montserrat', sans-serif;
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--dark-blue);
        margin: 0;
    }

    .bank-header h1::after {
        content: "";
        display: block;
        width: 40px;
        height: 3px;
        background: var(--primary-blue);
        margin-top: 5px;
        border-radius: 2px;
    }

    .header-controls {
        display: flex;
        gap: 15px;
        align-items: center;
    }

    .nav-toggle {
        cursor: pointer;
        color: var(--dark-blue);
        font-size: 1.3rem;
        transition: all 0.3s ease;
        padding: 8px;
        border-radius: 50%;
        background: rgba(42, 110, 187, 0.08);
        position: relative;
        z-index: 1001;
    }

    .nav-toggle:hover {
        color: var(--primary-blue);
        transform: translateY(-2px);
        background: rgba(42, 110, 187, 0.15);
    }

    /* Navigation Sidebar */
    .nav-sidebar {
        position: fixed;
        top: 0;
        right: -300px;
        width: 300px;
        height: 100vh;
        background: linear-gradient(180deg, var(--dark-blue) 0%, var(--primary-blue) 100%);
        box-shadow: -5px 0 25px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        overflow-y: auto;
    }

    .nav-sidebar.open {
        right: 0;
    }

    .sidebar-header {
        padding: 25px;
        background: rgba(255, 255, 255, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        backdrop-filter: blur(5px);
    }

    .sidebar-header h2 {
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        margin: 0;
        font-size: 1.4rem;
        color: white;
    }

    .sidebar-close {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    .sidebar-close:hover {
        background: rgba(255, 255, 255, 0.3);
    }

    .nav-menu {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .nav-menu li {
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .nav-menu a {
        color: rgba(255, 255, 255, 0.9);
        text-decoration: none;
        display: block;
        padding: 18px 25px;
        transition: all 0.3s ease;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .nav-menu a i {
        width: 20px;
        text-align: center;
    }

    .nav-menu a:hover {
        background: rgba(255, 255, 255, 0.1);
        padding-left: 30px;
        color: white;
    }

    /* Main Content */
    .main-content {
        padding: 20px;
        animation: fadeInUp 0.8s ease-out;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Loan Application Card */
    .loan-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        box-shadow: 0 15px 35px rgba(42, 110, 187, 0.15);
        padding: 40px;
        margin-bottom: 20px;
        border: 1px solid var(--medium-gray);
        position: relative;
        overflow: hidden;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    .loan-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(90deg, var(--primary-blue) 0%, var(--accent-blue) 100%);
    }

    .card-title {
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        color: var(--dark-blue);
        margin-bottom: 30px;
        text-align: center;
        font-size: 2rem;
        position: relative;
        padding-bottom: 15px;
    }

    .card-title::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 3px;
        background: var(--primary-blue);
        border-radius: 2px;
    }

    .card-subtitle {
        text-align: center;
        color: var(--text-light);
        margin-bottom: 30px;
        font-size: 1.1rem;
    }

    /* Form Styling */
    .form-group {
        margin-bottom: 25px;
    }

    .form-label {
        font-weight: 600;
        margin-bottom: 8px;
        display: block;
        color: var(--dark-blue);
        font-size: 1rem;
        font-family: 'Montserrat', sans-serif;
    }

    input {
        width: 100%;
        padding: 14px 16px;
        border: 1px solid var(--medium-gray);
        border-radius: 8px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: white;
        font-family: 'Source Sans Pro', sans-serif;
    }

    input:focus{
        outline: none;
        border-color: var(--primary-blue);
        box-shadow: 0 0 0 3px rgba(42, 110, 187, 0.15);
        background: white;
    }

    .input-group {
        position: relative;
    }

    .input-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-light);
        font-size: 1.2rem;
    }

    textarea.form-control {
        resize: vertical;
        min-height: 100px;
    }

    /* Submit Button */
    .submit-btn {
        width: 100%;
        padding: 16px;
        border: none;
        border-radius: 8px;
        background: linear-gradient(135deg, var(--primary-blue) 0%, var(--accent-blue) 100%);
        color: white;
        font-weight: 600;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(42, 110, 187, 0.25);
        margin-top: 10px;
        font-family: 'Montserrat', sans-serif;
    }

    .submit-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(42, 110, 187, 0.35);
    }

    .submit-btn:active {
        transform: translateY(0);
    }

    /* Loan Features */
    .loan-features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 40px 0;
    }

    .feature-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 12px;
        padding: 25px;
        text-align: center;
        box-shadow: 0 8px 20px rgba(42, 110, 187, 0.1);
        border: 1px solid var(--medium-gray);
        transition: all 0.3s ease;
    }

    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 25px rgba(42, 110, 187, 0.15);
    }

    .feature-icon {
        font-size: 2.5rem;
        color: var(--primary-blue);
        margin-bottom: 15px;
    }

    .feature-title {
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        color: var(--dark-blue);
        margin-bottom: 10px;
        font-size: 1.1rem;
    }

    .feature-description {
        color: var(--text-dark);
        font-size: 0.9rem;
    }

    /* Bottom Navigation */
    .bottom-navbar {
        position: fixed;
        bottom: 0;
        width: 100%;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        display: flex;
        justify-content: space-around;
        padding: 12px 0;
        box-shadow: 0 -2px 15px rgba(42, 110, 187, 0.1);
        border-top: 1px solid var(--medium-gray);
        z-index: 100;
    }

    .nav-link {
        text-align: center;
        color: var(--text-light);
        text-decoration: none;
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: all 0.3s ease;
        flex: 1;
    }

    .nav-link i {
        font-size: 1.3rem;
        margin-bottom: 4px;
        color: var(--text-light);
    }

    .nav-link span {
        font-size: 0.7rem;
        font-weight: 500;
    }

    .nav-link:hover,
    .nav-link.active {
        color: var(--primary-blue);
    }

    .nav-link:hover i,
    .nav-link.active i {
        color: var(--primary-blue);
    }

    /* Overlay for sidebar */
    .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
    }

    .sidebar-overlay.active {
        display: block;
    }



    @keyframes bounce {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }

    /* JivoChat Override */
    .jivochat-container {
        z-index: 98 !important;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .loan-card {
            padding: 30px 20px;
            margin: 20px auto;
        }

        .card-title {
            font-size: 1.7rem;
        }

        .loan-features {
            grid-template-columns: 1fr;
        }

        .nav-sidebar {
            width: 280px;
        }
    }

    @media (max-width: 480px) {
        .main-content {
            padding: 15px;
        }

        .loan-card {
            padding: 25px 15px;
        }

        .nav-sidebar {
            width: 100%;
            right: -100%;
        }

        .card-title {
            font-size: 1.5rem;
        }
    }
            .telegram-float {
            position: fixed;
            left: 20px;
            bottom: 20px;
            z-index: 1000;
            animation: float 3s ease-in-out infinite;
        }

        .telegram-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            background: #0088cc;
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .telegram-link:hover {
            background: #0077b5;
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }

        .telegram-icon {
            width: 30px;
            height: 30px;
            filter: brightness(0) invert(1);
        }

        .telegram-tooltip {
            position: absolute;
            left: 70px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .telegram-link:hover .telegram-tooltip {
            opacity: 1;
        }

        @keyframes float {
            0% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
            100% {
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .telegram-float {
                left: 10px;
                bottom: 10px;
            }

            .telegram-link {
                width: 50px;
                height: 50px;
            }

            .telegram-icon {
                width: 25px;
                height: 25px;
            }
        }
        .email-float {
        position: fixed;
        left: 20px;
        bottom: 90px;
        z-index: 1000;
        animation: floatEmail 3s ease-in-out infinite;
    }

    .email-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #2A6EBB 0%, #4A90E2 100%);
        border-radius: 50%;
        box-shadow: 0 4px 10px rgba(42, 110, 187, 0.3);
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .email-link:hover {
        background: linear-gradient(135deg, #1A4A7A 0%, #2A6EBB 100%);
        transform: scale(1.1);
        box-shadow: 0 6px 15px rgba(42, 110, 187, 0.4);
    }

    .email-icon {
        color: white;
        font-size: 1.5rem;
    }

    .email-tooltip {
        position: absolute;
        left: 70px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 8px 12px;
        border-radius: 4px;
        font-size: 14px;
        white-space: nowrap;
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
    }

    .email-link:hover .email-tooltip {
        opacity: 1;
    }

    @keyframes floatEmail {
        0% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-8px);
        }
        100% {
            transform: translateY(0);
        }
    }

    @media (max-width: 768px) {
        .email-float {
            left: 10px;
            bottom: 80px;
        }

        .email-link {
            width: 50px;
            height: 50px;
        }

        .email-icon {
            font-size: 1.3rem;
        }
    }

  </style>
</head>
<body>
    <!-- Email Floating Icon -->
<div class="email-float">
    <a href="mailto:#" class="email-link">
        <i class="fas fa-envelope email-icon"></i>
        <span class="email-tooltip">Contact us via email</span>
    </a>
</div>
     <!-- Telegram Floating Icon -->
    <div class="telegram-float">
        <a href="" class="telegram-link" target="_blank">
            <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" class="telegram-icon">
            <span class="telegram-tooltip">Join our Telegram group</span>
        </a>
    </div>
    <!-- Header -->
    <header class="bank-header">
        <h1>Skibridge finance</h1>
        <div class="header-controls">
            <div class="nav-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <!-- Navigation Sidebar -->
    <div class="nav-sidebar" id="navSidebar">
        <div class="sidebar-header">
            <h2>Account Menu</h2>
            <button class="sidebar-close" onclick="toggleSidebar()">
                <i class="fas fa-times"></i> Close
            </button>
        </div>

        <ul class="nav-menu">
            <li><a href="{% url 'dashboard' %}"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="{% url 'profile' %}"><i class="fas fa-user"></i> Profile</a></li>
            <li><a href=""><i class="fas fa-exchange-alt"></i> Transactions</a></li>
            <li><a href="{% url 'reset_profile' %}"><i class="fas fa-cog"></i> Settings</a></li>
            <li><a href="{% url 'LogOut' %}"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
    </div>

    <!-- Overlay for sidebar -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Loan Features -->
        <div class="loan-features">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-percentage"></i>
                </div>
                <h4 class="feature-title">Competitive Rates</h4>
                <p class="feature-description">Low interest rates tailored to your financial needs</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h4 class="feature-title">Quick Approval</h4>
                <p class="feature-description">Fast processing and quick loan disbursement</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h4 class="feature-title">Secure Process</h4>
                <p class="feature-description">Your information is protected with bank-level security</p>
            </div>
        </div>

        <!-- Loan Application Form -->
        <div class="loan-card">
            <h2 class="card-title">Loan Application</h2>
            <p class="card-subtitle">Complete your application to get started with your loan request</p>
           <!-- ====================== FORM START ====================== -->
<form method="POST" novalidate>
    {% csrf_token %}

    <!-- Amount Input -->
    <div class="form-group">
        <label class="form-label">Loan Amount ($)</label>
        <div class="input-group">
            {{ form.amount }}
            <i class="fas fa-dollar-sign input-icon"></i>
        </div>
        <small class="form-text text-muted">Minimum: $100</small>
    </div>

    <!-- Loan Type -->
    <div class="form-group">
        <label class="form-label">Loan Type</label>
        <div class="input-group">
            {{ form.loan_type }}
            <i class="fas fa-list input-icon"></i>
        </div>
    </div>

    <!-- Purpose -->
    <div class="form-group">
        <label class="form-label">Purpose of Loan</label>
        <div class="input-group">
            {{ form.purpose }}
            <i class="fas fa-bullseye input-icon"></i>
        </div>
    </div>

    <!-- Duration -->
    <div class="form-group">
        <label class="form-label">Duration (Months)</label>
        <div class="input-group">
            {{ form.duration }}
            <i class="fas fa-clock input-icon"></i>
        </div>
        <small class="form-text text-muted">1 to 360 months (1-30 years)</small>
    </div>

    <!-- Employment Status -->
    <div class="form-group">
        <label class="form-label">Employment Status</label>
        <div class="input-group">
            {{ form.employment_status }}
            <i class="fas fa-briefcase input-icon"></i>
        </div>
    </div>

    <!-- Annual Income -->
    <div class="form-group">
        <label class="form-label">Annual Income ($)</label>
        <div class="input-group">
            {{ form.annual_income }}
            <i class="fas fa-money-bill-wave input-icon"></i>
        </div>
    </div>

    <!-- Repayment Frequency -->
    <div class="form-group">
        <label class="form-label">Repayment Frequency</label>
        <div class="input-group">
            {{ form.repayment_frequency }}
            <i class="fas fa-calendar-alt input-icon"></i>
        </div>
    </div>

    <!-- Requested Date -->
    <div class="form-group">
        <label class="form-label">Requested Disbursement Date</label>
        <div class="input-group">
            {{ form.requested_date }}
            <i class="fas fa-calendar input-icon"></i>
        </div>
    </div>

    <!-- Collateral -->
    <div class="form-group">
        <label class="form-label">Collateral (Optional)</label>
        <div class="input-group">
            {{ form.collateral }}
        </div>
        <small class="form-text text-muted">Describe any assets you're willing to pledge as security</small>
    </div>

    <!-- Additional Notes -->
    <div class="form-group">
        <label class="form-label">Additional Notes (Optional)</label>
        <div class="input-group">
            {{ form.notes }}
        </div>
    </div>

    <button type="submit" class="submit-btn">
        <i class="fas fa-calculator"></i> Calculate & Proceed to Review
    </button>
</form>
<!-- ====================== FORM END ====================== -->
</div>
</div>
    <!-- Bottom Navigation -->
    <nav class="bottom-navbar">
        <a href="{% url 'dashboard' %}" class="nav-link">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="{% url 'bank_transfer' %}" class="nav-link">
            <i class="fas fa-exchange-alt"></i>
            <span>Transfer</span>
        </a>
        <a href="#" class="nav-link">
            <i class="fas fa-chart-line"></i>
            <span>Overview</span>
        </a>
        <a href="{% url 'profile' %}" class="nav-link active">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </a>
    </nav>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Function to toggle sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('navSidebar');
            const overlay = document.getElementById('sidebarOverlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        // Close sidebar when clicking on a link
        document.querySelectorAll('.nav-menu a').forEach(link => {
            link.addEventListener('click', () => {
                toggleSidebar();
            });
        });

        // Handle loan application form submission
        document.getElementById('loanApplicationForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission

            // Retrieve form data
            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const phoneNumber = document.getElementById('phoneNumber').value;
            const loanAmount = document.getElementById('loanAmount').value;
            const loanPurpose = document.getElementById('loanPurpose').value;

            // Basic validation
            if (!fullName || !email || !phoneNumber || !loanAmount || !loanPurpose) {
                alert('Please fill in all required fields.');
                return;
            }

            // Redirect to KYC page with form data
            window.location.href = `{% url 'kyc' %}?fullName=${encodeURIComponent(fullName)}&email=${encodeURIComponent(email)}&phoneNumber=${encodeURIComponent(phoneNumber)}&loanAmount=${encodeURIComponent(loanAmount)}&loanPurpose=${encodeURIComponent(loanPurpose)}`;
        });

        // Fix JivoChat z-index issue
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const jivoElements = document.querySelectorAll('[id*="jivo"], .jivochat-container');
                jivoElements.forEach(element => {
                    element.style.zIndex = '98';
                });
            }, 2000);
        });
    </script>
        <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register("{% static 'sw.js' %}")
      .then(() => console.log('Service Worker Registered'));
    }
    </script>
</body>
</html>
