{% load humanize %}
{% load static %}
{% load cloudinary %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Axis Capital Trust - Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="//code.jivosite.com/widget/U73k9r5PsR" async></script>
  <meta name="description" content="Dashboard for managing account and transactions.">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Source+Sans+Pro:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
        --light-blue: #E8F4F8;
        --primary-blue: #2A6EBB;
        --dark-blue: #1A4A7A;
        --accent-blue: #4A90E2;
        --soft-gray: #F5F7FA;
        --medium-gray: #E1E8ED;
        --text-dark: #2C3E50;
        --text-light: #7F8C8D;
        --success: #27AE60;
        --warning: #E67E22;
        --error: #E74C3C;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Source Sans Pro', sans-serif;
        background: linear-gradient(135deg, var(--light-blue) 0%, var(--soft-gray) 100%);
        color: var(--text-dark);
        min-height: 100vh;
        line-height: 1.6;
        padding-bottom: 80px; /* Space for bottom navbar */
    }

    /* Header Styling */
    .bank-header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid var(--medium-gray);
        box-shadow: 0 2px 15px rgba(42, 110, 187, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .bank-header h1 {
        font-family: 'Montserrat', sans-serif;
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--dark-blue);
        margin: 0;
    }

    .bank-header h1::after {
        content: "";
        display: block;
        width: 40px;
        height: 3px;
        background: var(--primary-blue);
        margin-top: 5px;
        border-radius: 2px;
    }

    .header-controls {
        display: flex;
        gap: 15px;
        align-items: center;
    }

    .nav-toggle {
        cursor: pointer;
        color: var(--dark-blue);
        font-size: 1.3rem;
        transition: all 0.3s ease;
        padding: 8px;
        border-radius: 50%;
        background: rgba(42, 110, 187, 0.08);
        position: relative;
        z-index: 1001;
    }

    .nav-toggle:hover {
        color: var(--primary-blue);
        transform: translateY(-2px);
        background: rgba(42, 110, 187, 0.15);
    }

    /* Navigation Sidebar */
    .nav-sidebar {
        position: fixed;
        top: 0;
        right: -300px;
        width: 300px;
        height: 100vh;
        background: linear-gradient(180deg, var(--dark-blue) 0%, var(--primary-blue) 100%);
        box-shadow: -5px 0 25px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        overflow-y: auto;
    }

    .nav-sidebar.open {
        right: 0;
    }

    .sidebar-header {
        padding: 25px;
        background: rgba(255, 255, 255, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        backdrop-filter: blur(5px);
    }

    .sidebar-header h2 {
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        margin: 0;
        font-size: 1.4rem;
        color: white;
    }

    .sidebar-close {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    .sidebar-close:hover {
        background: rgba(255, 255, 255, 0.3);
    }

    .user-details {
        padding: 20px 25px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        color: white;
    }

    .user-details p {
        margin-bottom: 10px;
        font-size: 0.95rem;
    }

    .user-details strong {
        color: rgba(255, 255, 255, 0.9);
    }

    .nav-menu {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .nav-menu li {
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .nav-menu a {
        color: rgba(255, 255, 255, 0.9);
        text-decoration: none;
        display: block;
        padding: 18px 25px;
        transition: all 0.3s ease;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .nav-menu a i {
        width: 20px;
        text-align: center;
    }

    .nav-menu a:hover {
        background: rgba(255, 255, 255, 0.1);
        padding-left: 30px;
        color: white;
    }

    /* Main Content */
    .main-content {
        padding: 20px;
        animation: fadeInUp 0.8s ease-out;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Account Info Card */
    .account-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        box-shadow: 0 15px 35px rgba(42, 110, 187, 0.15);
        padding: 25px;
        margin-bottom: 20px;
        border: 1px solid var(--medium-gray);
        position: relative;
        overflow: hidden;
    }

    .account-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(90deg, var(--primary-blue) 0%, var(--accent-blue) 100%);
    }

    .account-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 20px;
    }

    .welcome-section h2 {
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        color: var(--dark-blue);
        margin-bottom: 5px;
    }

    .welcome-section .user-name {
        font-size: 1.1rem;
        color: var(--text-light);
    }

    .profile-img {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        border: 3px solid var(--primary-blue);
        object-fit: cover;
    }

    .balance-section {
        text-align: center;
        margin: 25px 0;
    }

    .balance-label {
        font-size: 0.9rem;
        color: var(--text-light);
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .balance-amount {
        font-family: 'Montserrat', sans-serif;
        font-size: 2.2rem;
        font-weight: 700;
        color: var(--dark-blue);
        margin: 10px 0;
    }

    .account-number-section {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        margin: 20px 0;
    }

    .account-number {
        font-family: 'Montserrat', monospace;
        font-size: 1.1rem;
        color: var(--text-dark);
    }

    .copy-icon {
        cursor: pointer;
        color: var(--primary-blue);
        font-size: 1.1rem;
        transition: all 0.3s ease;
        padding: 5px;
        border-radius: 50%;
        background: rgba(42, 110, 187, 0.08);
    }

    .copy-icon:hover {
        color: var(--accent-blue);
        background: rgba(42, 110, 187, 0.15);
    }

    .copy-feedback {
        text-align: center;
        color: var(--success);
        font-size: 0.9rem;
        margin-top: 10px;
        display: none;
    }

    /* Payment Options */
    .payment-options {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 15px;
        margin: 25px 0;
    }

    .payment-option {
        text-align: center;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .payment-icon {
        width: 50px;
        height: 50px;
        background: white;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 8px;
        box-shadow: 0 4px 12px rgba(42, 110, 187, 0.1);
        border: 1px solid var(--medium-gray);
        transition: all 0.3s ease;
    }

    .payment-icon img {
        width: 30px;
        height: 30px;
        object-fit: contain;
    }

    .payment-label {
        font-size: 0.75rem;
        color: var(--text-dark);
        font-weight: 500;
    }

    .payment-option:hover .payment-icon {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(42, 110, 187, 0.2);
        border-color: var(--primary-blue);
    }

    /* Balance Cards */
    .balance-cards {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
        margin: 20px 0;
    }

    .balance-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 8px 20px rgba(42, 110, 187, 0.1);
        border: 1px solid var(--medium-gray);
        transition: all 0.3s ease;
    }

    .balance-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 25px rgba(42, 110, 187, 0.15);
    }

    .balance-card h4 {
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        color: var(--dark-blue);
        margin-bottom: 10px;
        font-size: 1rem;
    }

    .balance-card .amount {
        font-family: 'Montserrat', sans-serif;
        font-size: 1.4rem;
        font-weight: 700;
        color: var(--primary-blue);
    }

    /* Transactions Section */
    .transactions-section {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        box-shadow: 0 15px 35px rgba(42, 110, 187, 0.15);
        padding: 25px;
        margin: 20px 0;
        border: 1px solid var(--medium-gray);
        position: relative;
        overflow: hidden;
    }

    .transactions-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(90deg, var(--primary-blue) 0%, var(--accent-blue) 100%);
    }

    .section-header {
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        color: var(--dark-blue);
        margin-bottom: 20px;
        text-align: center;
        font-size: 1.3rem;
    }

    .transactions-table {
        width: 100%;
        border-collapse: collapse;
    }

    .transactions-table th {
        background: rgba(42, 110, 187, 0.08);
        padding: 12px 8px;
        text-align: left;
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        color: var(--dark-blue);
        font-size: 0.85rem;
    }

    .transactions-table td {
        padding: 12px 8px;
        border-bottom: 1px solid var(--medium-gray);
        font-size: 0.85rem;
    }

    .transaction-credit {
        background: rgba(39, 174, 96, 0.05);
    }

    .transaction-debit {
        background: rgba(231, 76, 60, 0.05);
    }

    .view-btn {
        background: linear-gradient(135deg, var(--primary-blue) 0%, var(--accent-blue) 100%);
        color: white;
        border: none;
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 0.8rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
    }

    .view-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(42, 110, 187, 0.3);
        color: white;
        text-decoration: none;
    }

    /* Security Info */
    .security-info {
        background: rgba(42, 110, 187, 0.08);
        border-radius: 12px;
        padding: 15px;
        margin: 20px 0;
        border-left: 4px solid var(--primary-blue);
        font-size: 0.9rem;
    }

    .security-info p {
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .security-info i {
        color: var(--primary-blue);
    }

    /* Bottom Navigation */
    .bottom-navbar {
        position: fixed;
        bottom: 0;
        width: 100%;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        display: flex;
        justify-content: space-around;
        padding: 12px 0;
        box-shadow: 0 -2px 15px rgba(42, 110, 187, 0.1);
        border-top: 1px solid var(--medium-gray);
        z-index: 100;
    }

    .nav-link {
        text-align: center;
        color: var(--text-light);
        text-decoration: none;
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: all 0.3s ease;
        flex: 1;
    }

    .nav-link i {
        font-size: 1.3rem;
        margin-bottom: 4px;
        color: var(--text-light);
    }

    .nav-link span {
        font-size: 0.7rem;
        font-weight: 500;
    }

    .nav-link:hover,
    .nav-link.active {
        color: var(--primary-blue);
    }

    .nav-link:hover i,
    .nav-link.active i {
        color: var(--primary-blue);
    }

    /* Overlay for sidebar */
    .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
    }

    .sidebar-overlay.active {
        display: block;
    }

    /* Telegram Icon */
    .telegram-icon {
        position: fixed;
        bottom: 80px;
        right: 20px;
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #0088cc 0%, #005999 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        animation: bounce 2s infinite;
        transition: all 0.3s ease;
        z-index: 99;
        color: white;
        font-size: 1.5rem;
        text-decoration: none;
    }

    .telegram-icon:hover {
        transform: scale(1.1);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        color: white;
        text-decoration: none;
    }

    @keyframes bounce {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }

    /* JivoChat Override */
    .jivochat-container {
        z-index: 98 !important;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .payment-options {
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .payment-icon {
            width: 45px;
            height: 45px;
        }

        .payment-icon img {
            width: 25px;
            height: 25px;
        }

        .balance-amount {
            font-size: 1.8rem;
        }

        .transactions-table {
            font-size: 0.8rem;
        }

        .transactions-table th,
        .transactions-table td {
            padding: 8px 4px;
        }

        .nav-sidebar {
            width: 280px;
        }
    }

    @media (max-width: 480px) {
        .payment-options {
            grid-template-columns: repeat(4, 1fr);
        }

        .payment-label {
            font-size: 0.7rem;
        }

        .main-content {
            padding: 15px;
        }

        .nav-sidebar {
            width: 100%;
            right: -100%;
        }
    }
          .telegram-float {
            position: fixed;
            left: 20px;
            bottom: 20px;
            z-index: 1000;
            animation: float 3s ease-in-out infinite;
        }

        .telegram-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            background: #0088cc;
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .telegram-link:hover {
            background: #0077b5;
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }

        .telegram-icon {
            width: 30px;
            height: 30px;
            filter: brightness(0) invert(1);
        }

        .telegram-tooltip {
            position: absolute;
            left: 70px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .telegram-link:hover .telegram-tooltip {
            opacity: 1;
        }

        @keyframes float {
            0% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
            100% {
                transform: translateY(0);
            }
        }


        @media (max-width: 768px) {
            .telegram-float {
                left: 10px;
                bottom: 10px;
            }

            .telegram-link {
                width: 50px;
                height: 50px;
            }

            .telegram-icon {
                width: 25px;
                height: 25px;
            }
        }
            .email-float {
        position: fixed;
        left: 20px;
        bottom: 90px;
        z-index: 1000;
        animation: floatEmail 3s ease-in-out infinite;
    }

    .email-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #2A6EBB 0%, #4A90E2 100%);
        border-radius: 50%;
        box-shadow: 0 4px 10px rgba(42, 110, 187, 0.3);
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .email-link:hover {
        background: linear-gradient(135deg, #1A4A7A 0%, #2A6EBB 100%);
        transform: scale(1.1);
        box-shadow: 0 6px 15px rgba(42, 110, 187, 0.4);
    }

    .email-icon {
        color: white;
        font-size: 1.5rem;
    }

    .email-tooltip {
        position: absolute;
        left: 70px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 8px 12px;
        border-radius: 4px;
        font-size: 14px;
        white-space: nowrap;
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
    }

    .email-link:hover .email-tooltip {
        opacity: 1;
    }

    @keyframes floatEmail {
        0% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-8px);
        }
        100% {
            transform: translateY(0);
        }
    }

    @media (max-width: 768px) {
        .email-float {
            left: 10px;
            bottom: 80px;
        }

        .email-link {
            width: 50px;
            height: 50px;
        }

        .email-icon {
            font-size: 1.3rem;
        }
    }
  </style>
</head>
<body>
    <!-- Email Floating Icon -->
<div class="email-float">
    <a href="mailto:axiscapitaltrustbank@gmail.com" class="email-link">
        <i class="fas fa-envelope email-icon"></i>
        <span class="email-tooltip">Contact us via email</span>
    </a>
</div>
     <!-- Telegram Floating Icon -->
    <div class="telegram-float">
        <a href="https://t.me/Financial_Services_Team" class="telegram-link" target="_blank">
            <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" class="telegram-icon">
            <span class="telegram-tooltip">Join our Telegram group</span>
        </a>
    </div>
    <!-- Header -->
    <header class="bank-header">
        <h1>Skybridge Bank</h1>
        <div class="header-controls">
            <div class="nav-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <!-- Navigation Sidebar -->
    <div class="nav-sidebar" id="navSidebar">
        <div class="sidebar-header">
            <h2>Account Menu</h2>
            <button class="sidebar-close" onclick="toggleSidebar()">
                <i class="fas fa-times"></i> Close
            </button>
        </div>

        <div class="user-details">
            <p>Username: <strong>{{ request.user }}</strong></p>
            <p>Email: <strong>{{ user_profile.email }}</strong></p>
        </div>

        <ul class="nav-menu">
            <li><a href="{% url 'dashboard' %}"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="{% url 'profile' %}"><i class="fas fa-user"></i> Profile</a></li>
            <li><a href="{% url 'transaction' %}"><i class="fas fa-exchange-alt"></i> Transactions</a></li>
            <li><a href="{% url 'reset_profile' %}"><i class="fas fa-cog"></i> Settings</a></li>

            {% if user_profile.cardholder_name %}
                <li><a href="{% url 'card_list' %}"><i class="fas fa-credit-card"></i> Cards</a></li>
            {% endif %}

            <li><a href="{% url 'application_for_credit_card' %}"><i class="fas fa-credit-card"></i> Apply For Card</a></li>

            <li>
                <a href="{% url 'create_investment' %}" >
                  <i class="fas fa-chart-line"></i>Investment plan
                </a>
           </li>

           <li>
               <a href="{% url 'apply_loan' %}">
                 <i class="fas fa-hand-holding-dollar"></i>  Apply for a Loan
               </a>
           </li>

          <li>
              <a href="{% url 'investment_dashboard' %}">
           <i class="fas fa-money-bill-transfer"></i> Current investments
              </a>
          </li>

            <li><a href="{% url 'LogOut' %}"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
    </div>

    <!-- Overlay for sidebar -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Account Info Card -->
        <div class="account-card">
            <div class="account-header">
                <div class="welcome-section">
                    <h2>Welcome Back</h2>
                    <div class="user-name">{{user_profile.first_name}} {{user_profile.last_name}}</div>
                </div>
                {% if user_profile.profile_pic %}
                    <img src="{{ user_profile.profile_pic.url }}" class="profile-img" alt="Profile Picture">
                {% else %}
                    <img src="{% static 'images/default.jpg' %}" class="profile-img" alt="Default Profile Picture">
                {% endif %}
            </div>

            <div class="balance-section">
                <div class="balance-label">Available Balance</div>
                <div class="balance-amount">{{user_profile.currency}}{{user_profile.balance|intcomma}}</div>
                <div class="balance-label">Account Number</div>
                <div class="account-number-section">
                    <span class="account-number" id="accountNumber">{{ user_profile.account_number }}</span>
                    <i class="fas fa-copy copy-icon" onclick="copyToClipboard()"></i>
                </div>
                <div id="copyFeedback" class="copy-feedback">Account number copied!</div>
            </div>

            <!-- Payment Options -->
            <div class="payment-options">
                <a href="{% url 'bank_transfer' %}" class="payment-option">
                    <div class="payment-icon">
                        <img src="{% static 'images/banktransfer.jpg' %}" alt="Bank Transfer">
                    </div>
                    <div class="payment-label">Bank</div>
                </a>

                <a href="{% url 'crypto' %}" class="payment-option">
                    <div class="payment-icon">
                        <img src="{% static 'images/crypto.jpg' %}" alt="Crypto Transfer">
                    </div>
                    <div class="payment-label">Crypto</div>
                </a>

                <a href="{% url 'paypal' %}" class="payment-option">
                    <div class="payment-icon">
                        <img src="{% static 'images/paypal.jpg' %}" alt="PayPal Transfer">
                    </div>
                    <div class="payment-label">PayPal</div>
                </a>

                <a href="{% url 'cashapp' %}" class="payment-option">
                    <div class="payment-icon">
                        <img src="{% static 'images/cashapp.jpg' %}" alt="Google Pay">
                    </div>
                    <div class="payment-label">Cash App</div>
                </a>

            </div>
        </div>

        <!-- Balance Cards -->
        <div class="balance-cards">
            <div class="balance-card">
                <h4>Current Balance</h4>
                <div class="amount">{{user_profile.currency}} {{user_profile.balance|intcomma}}</div>
            </div>
            <div class="balance-card">
                <h4>Refundable Balance</h4>
                <div class="amount">{{user_profile.currency}}{{user_profile.refund_balance}}</div>
            </div>
        </div>

        <!-- Security Info -->
        <div class="security-info">
            <p>
                <i class="fas fa-shield-alt"></i>
                Browser: <span class="Browser_name">Detecting...</span>
            </p>
            <p>
                <i class="fas fa-network-wired"></i>
                IP Address: <span class="ip_numb">Fetching...</span>
            </p>
        </div>

        <!-- Transactions Section -->
        <div class="transactions-section">
            <h3 class="section-header">Recent Transactions</h3>
            <div class="table-responsive">
                <table class="transactions-table">
                    <thead>
                        <tr>
                            <th>S/N</th>
                            <th>Amount</th>
                            <th>Balance After</th>
                            <th>Description</th>
                            <th>Date</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for transaction in transactions %}
                            <tr class="{% if transaction.description == 'Credit' %}transaction-credit{% else %}transaction-debit{% endif %}">
                                <td>{{ forloop.counter }}</td>
                                <td>{{ user_profile.currency }}{{ transaction.amount }}</td>
                                <td>{{ user_profile.currency }}{{ transaction.balance_after }}</td>
                                <td>{{ transaction.description }}</td>
                                <td>{{ transaction.timestamp|date:"M d, Y H:i" }}</td>
                                <td>
                                    <a href="{% url 'transaction_detail' transaction.pk %}" class="view-btn">
                                        View
                                    </a>
                                </td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="6" style="text-align: center;">No recent transactions.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-navbar">
        <a href="{% url 'dashboard' %}" class="nav-link active">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="{% url 'bank_transfer' %}" class="nav-link">
            <i class="fas fa-exchange-alt"></i>
            <span>Transfer</span>
        </a>
    <a href="{% url 'transaction' %}" class="nav-link">
      <i class="fas fa-chart-line nav-icon"></i>
      <span class="nav-label">Overview</span>
    </a>
        <a href="{% url 'profile' %}" class="nav-link">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </a>
    </nav>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Function to toggle sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('navSidebar');
            const overlay = document.getElementById('sidebarOverlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        // Close sidebar when clicking on a link
        document.querySelectorAll('.nav-menu a').forEach(link => {
            link.addEventListener('click', () => {
                toggleSidebar();
            });
        });

        // Function to get browser name
        function getBrowserName() {
            const userAgent = navigator.userAgent;
            let browserName;

            if (userAgent.indexOf("Firefox") > -1) {
                browserName = "Mozilla Firefox";
            } else if (userAgent.indexOf("Chrome") > -1) {
                browserName = "Google Chrome";
            } else if (userAgent.indexOf("Safari") > -1) {
                browserName = "Apple Safari";
            } else if (userAgent.indexOf("MSIE") > -1 || userAgent.indexOf("Trident") > -1) {
                browserName = "Internet Explorer";
            } else {
                browserName = "Unknown Browser";
            }

            return browserName;
        }

        // Set the browser name in the HTML
        document.addEventListener("DOMContentLoaded", function() {
            const browserName = getBrowserName();
            document.querySelector('.Browser_name').textContent = browserName;
        });

        // Function to get user IP
        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                document.querySelector('.ip_numb').textContent = data.ip;
            } catch (error) {
                console.error('Error fetching IP address:', error);
                document.querySelector('.ip_numb').textContent = 'Unable to fetch';
            }
        }

        document.addEventListener("DOMContentLoaded", getUserIP);

        function copyToClipboard() {
            const accountNumber = document.getElementById("accountNumber").innerText;
            navigator.clipboard.writeText(accountNumber).then(() => {
                const feedback = document.getElementById("copyFeedback");
                feedback.style.display = "block";
                setTimeout(() => {
                    feedback.style.display = "none";
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }

        // Fix JivoChat z-index issue
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for JivoChat to load and adjust its z-index
            setTimeout(() => {
                const jivoElements = document.querySelectorAll('[id*="jivo"], .jivochat-container');
                jivoElements.forEach(element => {
                    element.style.zIndex = '98';
                });
            }, 2000);
        });
    </script>
</body>
</html>